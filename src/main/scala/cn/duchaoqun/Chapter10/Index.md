## Chapter 10 Trait

- Scala 中类可以继承任意多个 Trait（在 Java 中 class 只能扩展一个父类，但是可以实现任意数量的接口，但接口只能包含抽象方法，不能包含字段。）。
- Scala 中 Trait 可以要求实现他们的 Class 具备特定的字段、方法、或者父类。

### 【Demo01】为什么没有多重继承？

- Scala 和 Java 一样不允许类继承多个父类（不能多重继承）。
- 如果我们只是把两个毫不相关的类组合在一起，这样多重继承没有问题。
- 但是如果这些类包含共同的方法或者字段，这样就有问题了（方法重复和菱形继承）。

### 【Demo02】当作 Interface 使用的 Trait。

- 在 Scala 中的 trait 完全可以按照 Java 中的 Interface 的方式来使用。
- 在 Java 中的所有 interface 都可以作为 trait 来使用。
- 在 Trait 中定义抽象的方法，不需要使用 abstract 关键字来修饰，没有方法体的默认就是抽象方法。
- 在重写 Trait 中的抽象方法(没有方法体)的时候，不需要使用 override 关键字。
- 在继承多个 Trait 的时候，后面的使用 with 关键字。

### 【Demo03】带有具体实现的 Trait。

- 与 Java 的 Interface 不同，Scala 中的 Trait 可以提供方法和字段的实现。
- 特质中的方法不一定是抽象的，可以有具体的方法体。
- 在 Trait 中定义抽象方法(不包含实现代码)，与抽象类中的抽象方法一样，不给出方法的具体实现，该方法必须在它的子类中实现方法体。
- 在 Trait 中定义抽象方法(包含实现代码),在子类中可以直接调用，也可以重写这个方法。
- 注意：这里有一个弊端，当特质改变时，所有混入了该特质的类都需要重新编译。

### 【Demo04】对象“混入”特质。

- trait 继承 trait 的时候，可以重写它的方法，也可以不去实现它的方法？对于有方法体的方法，可以直接调用。
- 创建对象的时候，可以"混入"某个特质，这样只有这个对象混入了该 Trait，其他对象则没有。

### 【Demo05】叠加在一起的特质

- 当多个 Trait 叠加在一起来使用的时候，顺序很重要，其方法先被执行的排在最后面。
- 你可以为类和对象添加多个相互调用的特质，从最后一个开始执行，这对需要分阶段加工处理的某个值的场景很有用。

### 【Demo06】在特质中重写抽象方法

- 如果一个特质中的方法是抽象的，那么在另外一个特质继承这个方法的时候需要实现它，使用abstract override 关键字进行修饰。

### 【Demo07】当作富接口使用的特质

- 特质可以包含大量的工具方法，而这些工具方法可以依赖一些抽象方法来实现。例如 Iterator 特质就利用抽象的 next 和 hasNext 定义了大量的方法。
- 在 Scala 中，在特质中使用抽象的和具体的方法十分普遍。但是在 Java 中，你就需要声明一个接口和额外的扩展该接口的类。

### 【Demo08】特质中的具体字段

- 理解1：特质中的字段可以是具体的，也可以是抽象的。如果你给出了初始值，那么字段就是具体的。
  混入该特质的类会自动得到这个字段，这个字段不是被继承的，它们只是简单的被加到子类当中。
- 理解2：在 Trait 中定义具体属性，继承 Trait 的类就自动获取了 Trait 中定义的属性。
- 注意：这里与继承 Class 不同，如果继承 Class 获取的字段，实际定义在父类中，而继承 Trait 获取的字段，就直接添加到了类中。

### 【Demo09】特质中的抽象字段

- 理解1：特质中未被初始化的字段在其子类中必须予以实现。
- 理解2：在 Trait 中可以定义抽象字段，而 Trait 中的具体方法可以基于抽象字段来编写，但继承 Trait 的类，则必须覆盖抽象的 field，提供具体的值。

### 【Demo10】特质构造顺序

### 【Demo11】初始化特质中的字段

- 特质不能有构造参数，每个特质都有一个无参构造器。
- 缺少构造器参数是特质与类之间唯一的技术差别，除此以外，特质可以具备类的所有特性，比如具体的和抽象的字段，以及父类。

### 【Demo12】扩展类的特质

- 特质可以扩展另外一个特质，有特质组成的继承层级也很常见。
- 特质也可以扩展类，这个类将会自动成为所有混入该特质的类的父类。
- 如果我们的类已经扩展了一个不相关的类，那么就不能再混入这个特质了（继承类的特质）。

### 【Demo13】自身类型

### 【Demo14】背后发生了什么

- Scala 需要将特质翻译成 JVM 的类和接口，我们不需要详细了解他是如何做到的，但了解原理对理解特质会有帮助。

### Iterable 特质

- 在 Scala 的集合体系中，Iterable 是共同的 Trait，Iterable 要求继承者实现一些共同的方法，例如对元素的遍历(迭代)等。
